version: '3'
services:
  client:
    container_name: client-area
    build: 
      context: ./client
      dockerfile: Dockerfile
      target: dev
    restart: always
    environment:
      REACT_APP_DEV_ENV: "TRUE"
    image: client-area
    ports:
      - 3000:3000
    command: >
            sh -c "flutter pub get && flutter run -d web-server --web-port 3000 --web-hostname 0.0.0.0"
      # front-end built with react
  server:
    container_name: server
    build: 
      context: ./server
      dockerfile: Dockerfile
    environment:
      DEV_ENV: "TRUE"
    image: server-area
    ports:
      - 8080:8080